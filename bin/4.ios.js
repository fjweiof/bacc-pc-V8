webpackJsonp([4],{92:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var c=o.get;if(void 0!==c)return c.call(r)},p=n(21);if(window.store){var l=function(e,t,n,r){tongji.beginCharge(e,u[e].actureMoney,u[e].actureCoins,n,"苹果商店支付"),store.order(e)},u={low:{bundle:"com.1357g.niuniu.5tickets"},middle:{bundle:"com.bjl2000.bacc.middleprice"},high:{bundle:"com.bjl2000.bacc.highprice"}};for(var f in u)store.register({id:u[f].bundle,alias:f,type:store.CONSUMABLE}),store.when(f).updated(function(e){console.log(f,"price",e.price),u[f]=p(u[f],e),"invalid"!=e.state&&(u[f].actureMoney=Number(e.price.substr(1)),u[f].actureCoins=e.description.substr(e.description.indexOf("=")+1))}).approved(function(e){e.verify()}).verified(function(e){if(console.log("finally",e),!appleOrderid)return appleOrderCb&&appleOrderCb("appleOrderid was not set");var t={actureMoney:u[f].actureMoney,orderid:appleOrderid,receipt:e.transaction.appStoreReceipt};getAjax("/pf/apple/pay",t,function(t,n){t=t||n.err,t?(console.log(t,n),tipon(t).popup()):tipon("购买成功").popup(),e.finish(),tongji.endCharge(appleOrderid,"苹果商店支付");var r=appleOrderCb;appleOrderCb=null,r&&r()})}).cancelled(function(e){var t=appleOrderCb;appleOrderCb=null,t&&t()});store.validator=function(e,t){console.log("verify",e),t(!0)},store.error(function(e){console.log(e)}),store.refresh();var d=async.queue(function(e,t){"function"==typeof e?e(t):t()});window.pay=function(e,t,n,r){!r&&(r=_noop),d.push(l.bind(null,e,t,n),r)},document.addEventListener("gameLoaded",function(){var e=n(93),t=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recharge"))}return i(t,e),c(t,[{key:"onInit",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onInit",this).call(this);var e=this.contentPane.getChild("n87"),n=0,r=function(t){i=e.getChildAt(n),u[t].price&&(i.getChild("n85").text=u[t].price),i.onClick(null,function(){getAjax("createOrder",{productId:u[t].bundle},function(e,n){pay(u[t].bundle)})}),e.addChild(i)};for(var o in u){var i;r(o)}}}]),t}(e.Win);e.RechargeWin=t})}else alert("cc.fovea.cordova.purchase not installed")}});